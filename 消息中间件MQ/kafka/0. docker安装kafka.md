1. 配置docker镜像加速

    - 创建或修改 /etc/docker/daemon.json 文件，修改为如下形式

      ```bash
      {
          "registry-mirrors": [
              "http://hub-mirror.c.163.com",
              "https://docker.mirrors.ustc.edu.cn",
              "https://registry.docker-cn.com"
          ]
      }
      ```

    - 重启docker `service docker restart`

2. 下载镜像

    ```shell
    docker pull wurstmeister/zookeeper
    docker pull wurstmeister/kafka
    ```

3. 启动zookeeper

    ```shell
    docker run -d --name zookeeper -p 2181:2181 -t wurstmeister/zookeeper
    ```

4. 启动kafka（如果服务器在云上，换成外网ip（192.168.1.1））

    ```shell
    docker run -d --name kafka \
    -p 9092:9092 \
    -e KAFKA_BROKER_ID=0 \
    -e KAFKA_ZOOKEEPER_CONNECT=192.168.50.120:2181 \
    -e KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://192.168.50.120:9092 \
    -e KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:9092 wurstmeister/kafka
    ```

5. 进入容器执行命令
    `docker exec -it 容器id bash`
    `cd /opt/kafka_2.13-2.8.1/bin`

    ```shell
    #创建主题
    kafka-topics.sh --create --zookeeper zookeeper地址:2181 --replication-factor 1 --partitions 1 --topic kafkatest  
    #添加消息
    kafka-console-producer.sh --broker-list localhost:9092 --topic kafkatest
    #消费消息
    kafka-console-consumer.sh --zookeeper zookeeper地址:2181 --topic kafkatest --from-beginning
    ```